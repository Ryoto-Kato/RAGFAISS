2023-12-02 23:57:00 +0100   57190 execution.flow     INFO     Executing node lookup. node run id: 77f633b3-c5b6-4b74-87c5-2a792dcd9673_lookup_fe30d8c6-8fca-4a63-b493-53292ded3e0a
2023-12-02 23:57:00 +0100   57190 execution          ERROR    Node lookup in line None failed. Exception: Execution failure in 'lookup': (ValueError) query embedding dimension 1536 does not match index dimension 0.
Traceback (most recent call last):
  File "/home/ryotok/anaconda3/envs/hackathon3/lib/python3.9/site-packages/promptflow/_core/flow_execution_context.py", line 185, in _invoke_tool_with_timer
    return f(**kwargs)
  File "/home/ryotok/anaconda3/envs/hackathon3/lib/python3.9/site-packages/promptflow/_core/tool.py", line 100, in decorated_tool
    output = func(*args, **kwargs)
  File "/home/ryotok/anaconda3/envs/hackathon3/lib/python3.9/site-packages/promptflow_vectordb/tool/faiss_index_lookup.py", line 100, in search
    return _do_search()
  File "/home/ryotok/anaconda3/envs/hackathon3/lib/python3.9/site-packages/promptflow_vectordb/core/logging/utils.py", line 97, in wrapper
    res = func(*args, **kwargs)
  File "/home/ryotok/anaconda3/envs/hackathon3/lib/python3.9/site-packages/promptflow_vectordb/tool/faiss_index_lookup.py", line 98, in _do_search
    return self.__adapter.search(vector, top_k)
  File "/home/ryotok/anaconda3/envs/hackathon3/lib/python3.9/site-packages/promptflow_vectordb/tool/adapter/local_faiss_adapter.py", line 32, in search
    obj_list = self.__store.search_by_embedding(query, top_k)
  File "/home/ryotok/anaconda3/envs/hackathon3/lib/python3.9/site-packages/promptflow_vectordb/core/logging/utils.py", line 97, in wrapper
    res = func(*args, **kwargs)
  File "/home/ryotok/anaconda3/envs/hackathon3/lib/python3.9/site-packages/promptflow_vectordb/service/client/embeddingstore_client.py", line 103, in search_by_embedding
    return self.__agent.search_by_embedding(
  File "/home/ryotok/anaconda3/envs/hackathon3/lib/python3.9/site-packages/promptflow_vectordb/service/client/agent/file_based_agent.py", line 26, in search_by_embedding
    return self.__store.search_by_embedding(query_embedding, top_k)
  File "/home/ryotok/anaconda3/envs/hackathon3/lib/python3.9/site-packages/promptflow_vectordb/core/logging/utils.py", line 97, in wrapper
    res = func(*args, **kwargs)
  File "/home/ryotok/anaconda3/envs/hackathon3/lib/python3.9/site-packages/promptflow_vectordb/core/embeddingstore_core.py", line 179, in search_by_embedding
    return self.__store.search_by_embedding(query_embedding, top_k)
  File "/home/ryotok/anaconda3/envs/hackathon3/lib/python3.9/site-packages/promptflow_vectordb/core/store/local_based_store.py", line 29, in search_by_embedding
    return super().search_by_embedding(query_embedding, top_k)
  File "/home/ryotok/anaconda3/envs/hackathon3/lib/python3.9/site-packages/promptflow_vectordb/core/store/in_memory_store.py", line 26, in search_by_embedding
    return self._engine.search_by_embedding(query_embedding, top_k)
  File "/home/ryotok/anaconda3/envs/hackathon3/lib/python3.9/site-packages/promptflow_vectordb/core/engine/langchain_engine.py", line 58, in search_by_embedding
    raise ValueError(f'query embedding dimension {len(query_embedding)}'
ValueError: query embedding dimension 1536 does not match index dimension 0

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ryotok/anaconda3/envs/hackathon3/lib/python3.9/site-packages/promptflow/_core/flow_execution_context.py", line 89, in invoke_tool
    result = self._invoke_tool_with_timer(node, f, kwargs)
  File "/home/ryotok/anaconda3/envs/hackathon3/lib/python3.9/site-packages/promptflow/_core/flow_execution_context.py", line 196, in _invoke_tool_with_timer
    raise ToolExecutionError(node_name=node_name, module=module) from e
promptflow._core._errors.ToolExecutionError: Execution failure in 'lookup': (ValueError) query embedding dimension 1536 does not match index dimension 0
